<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>JSON Viewer Test</title>
	<!-- <script
		src="https://cdn.jsdelivr.net/gh/kazMcLamore/simple-json-viewer@main/json-viewer.js"
		type="module"></script> -->
	<script src="/json-viewer.js" type="module"></script>
</head>
<body>

	<!-- create the json-viewer -->
	<json-viewer id="viewer-1" title="This Result: "
		webviewer-name="json-viewer"
		json-path="data[0].fieldData.text" open>
	</json-viewer>

	<json-viewer id="viewer-2" title="Function Steps: " webviewer-name="json-viewer"
		json-path="data[0].portalData['Function Step']" open>
	</json-viewer>

	<json-viewer id="viewer-3" title="Function Variables: " webviewer-name="json-viewer"
		json-path="data[0].fieldData['unstored variable json']" open>
	</json-viewer>
	
	<script>

	const urlParams = new URLSearchParams(window.location.search);
		const resultUuid = urlParams.get('resultUuid');
		const functionUuid = urlParams.get('functionUuid');

	const query = {
		"action": "read",
		"layouts": "query: function log v1",
		"limit": 1,
		"query": [
			{
				__id: `==${resultUuid}`,
			}
		]
	}

		const query2 = {
			"action": "read",
			"layouts": "query: function v2",
			"limit": 1,
			"query": [
				{
					__id: `==${functionUuid}`,
				}
			]
		}

	const viewer = document.querySelector('#viewer-1')
	viewer.query = query

	const viewer2 = document.querySelector('#viewer-2')
	viewer2.query = query2

	const viewer3 = document.querySelector('#viewer-3')
	viewer3.query = query2

</script>
</body>
</html>